---
title: react语法基础
date: 2022-06-30 10:27:53
permalink: /pages/ba6d34/
categories:
  - 前端
  - react
tags:
  - 
author: 
  name: cometang
  link: https://github.com/cometang
---





# 前言

> 官网地址：https://reactjs.org/ 
>
> 中文官网：http://doc.react-china.org/  【弃用】
>
> 官方脚手架： https://www.npmjs.com/package/create-react-app

> react.js 是目前全球下载量，使用量最大最多的前端框架，由facebook研发并开源，react的诞生才算是真正意义上定义了前端开发行业存在的必要性和重要性，阿里盛传语录：“流量为王时代，谁掌握了前端就掌控了市场”，13年以后国内大量后端工程师，测试工程师，运维工程师转向前端开发，开启了真正意义上的 移动互联网，前端工程化飞速的发展。
>
> 因react在全球的地位，国内一线大厂均将react 设置为前端御用技术栈。

![img](/img/react/1.png)

> react的厉害之处在于很多前端行业的概念都是由他们的团队进行首次提出，有非常多的概念在当时都是十分超前甚至是空前的。
>
> react 首次提出了 **数据响应式更新**概念，首次提出了**虚拟dom**概念，首次提出了**最小粒度更新（diff算法）**概念，首次提出了前端的**组件化开发**概念。

**话外：vue和react的区别是？**

> vue是尤雨溪参照react 和angular 的优点进行设计的，
>
> vue的响应式 diff算法  组件化开发 概念均来自react
>
> vue的指令 来自于angular的内部指令





## 1. react 项目搭建

> 底层环境：node^16.x 版本
>
> vscode 插件：

- 全局安装官方脚手架

```js
yarn global add  create-react-app 
或
npm i create-react-app -g
```

- 通过脚手架创建项目

```js
create-react-app 项目名
```

- 启动项目

```js
yarn start 
```



## 2.项目目录结构 

```js
demo
├── public                    #项目静态资源文件
│   ├── favicon.ico           #页面title 图标           
│   ├── index.html            #唯一页面
│   ├── logo192.png           #打包为app 或小程序时使用的 应用图标
│   ├── logo512.png           #打包为app 或小程序时使用的 应用图标
│   ├── manifest.json         #打包为app 或小程序 需要的配置文件  
│   └── robots.txt           
├── src                       #项目源代码文件夹
│   ├── App.css               #根组件 css代码 【后续一般放到views目录中】
│   ├── App.js                #根组件 js代码   【后续一般放到views目录中】
│   ├── App.test.js           #根组件测试js代码【可删除】
│   ├── index.css             #全局css文件
│   ├── index.js              #项目入口文件 项目主模块
│   ├── logo.svg              #参与打包的静态资源文件【后续一般放到 assets文件夹中】
│   ├── reportWebVitals.js    #测试文件【可删除】
│   └── setupTests.js         #测试文件【可删除】
├── README.md                 #项目文档
├── package-lock.json         #版本锁定器
└── package.json              #三方包说明文档
```

- 目录整理

> 按照vue项目进行前端项目工程化整理 
>
> react 开发需要一定的前端基础，react脚手架搭建的项目只是一个初步的项目架构，具体的目录结构 三方包等都需要自己一一搭建。
>
> 删除所有的测试相关的代码，创建部分项目管理的目录 ，把根组件APP移动到views目录下

```js
demo
├── .vscode
│   └── settings.json
├── public
│   ├── favicon.ico
│   ├── index.html
│   ├── logo192.png
│   ├── logo512.png
│   ├── manifest.json
│   └── robots.txt
├── src
│   ├── assets
│   │   └── logo.svg
│   ├── components
│   ├── router
│   ├── store
│   ├── utils
│   ├── views
│   │   ├── App.css
│   │   └── App.js
│   ├── index.css
│   └── index.js
├── README.md
├── package-lock.json
└── package.json
```



- vscode 插件安装 -对react语法的代码补全工具

> 安装：ES7+ React/Redux/React-Native snip
>
> vscode-设置-搜索: `emmet`  ---打开`settings.json` 文件   【jsx语法代码补全】
>
> 添加如下配置： 

```json
"emmet.includeLanguages": {
        "javascript": "javascriptreact"
    }
```



## 3.react js组件

> 组件的后缀名 可以为 `js`  也可以为  `jsx` ，两者都可以，语法上没有任何变化和冲突

- 函数式组件 app.jsx

```js
//导入组件样式
import  './App.css'

//暴露一个函数给主模块（入口文件 index.js）
export default function App(){
    let name = '张三';
    //返回一段html代码
    return (
        <p>
            我是根组件
            {name}
        </p>
    )
}
```

- 类组件  app.jsx

```js
import { Component } from 'react';
import './App.css'
export default class App extends Component {
    userName = "张三";
    state = {
        color: '#fff',
    }
	//借助render 函数 返回 html代码
    render() {
        return (
            <p style={{ color:this.state.color,fontSize:'30px' }}>{this.userName}</p>
        )
    }
}
```

## 4.jsx 语法

> jsx 语法可以在js中 写html代码
>
> jsx语法的诞生也意味着 可以在html代码中 混着写入 数组方法 循环 判断 等等js语句，这样大大减少了js本身的代码逻辑。
>
> 注意：jsx 语法中 有的单词不能出现
>
> class 用 className 代替   【防止jsx把class解析成类的定义】
>
> 使用jsx 语法注意 js中已经用过的关键字 谨慎使用

> js中的表达式 通过  字符串模板括起来   `{}`

```jsx

import { useState } from 'react';
import './App.css'


export default function App(){

    let [userList] = useState([
        {name:'张麻子',age:40,like:['吃饭','睡觉']},
        {name:'黄四郎',age:33,like:['吃饭','挣钱']},
        {name:'六爷',age:33,like:['吃凉粉','挣钱']},
    ])
    
    return (
      <div>
        {userList.map(item=>{
            return  (
                <div className='item'>
                    <p>姓名: {item.name}</p>
                    <p>年龄: {item.age }</p>
                    <p>爱好:   
                       {item.like.map(item1=>{
                        return <span>--{item1}--</span>
                       })}    
                    </p>
                </div>
            )
           
        })}
      </div>
    )
}
```



## 5.useState函数-data 的定义

> useState()  会返回一个数组中携带两个参数，一个是定义的变量初始值，第二个是修改该数据的方法。
>
> 一般情况下，通过数组的解构，快速获取useState的两个返回值。
>
> 例：` let [num,setNum] = useState(100);    `

- 基本数据类型

```jsx

import { useState } from 'react';
import './App.css'

export default function App(){
      let [num,setNum] = useState(0)
    
      //修改数据--实现类似双向绑定的效果[页面改变-数据变]
      const changeNum = (e)=>{
        setNum(e.target.value)
      }
      //设置数据--直接覆盖[数据变-页面变]
      const setData = ()=>{
        setNum(1000)
      }

    return (
      <div>
        <h1>{num}</h1>
            <input type="text" onChange={changeNum}  value={num}/>
            <button onClick={setData}>直接设置数据</button>
      </div>
    )
}
```

- 引用数据类型

```js

import { useState } from 'react';
import './App.css'


export default function App() {
    let [search, setSearch] = useState('')

    let [likes, setLike] = useState([]);

    //修改search 的数据
    const changeSearch = (e) => {
        setSearch(e.target.value);
    }
    //添加元素
    const addData = (e) => {
        setLike([...likes, search]);
    }

    return (
        <div>
            <input type="text" onChange={changeSearch} placeholder='添加搜索记录' value={search} />
            <button onClick={addData}>添加数据</button>
            <ul>
                {likes.map((item, index) => {
                    return <li key={index}>  {item} </li>
                })}
            </ul>
        </div>
    )


}
```

## 6.事件处理

> React 元素的事件处理和 DOM 元素的很相似，但是有一点语法上的不同
>
> - React 事件的命名采用小驼峰式（camelCase），而不是纯小写。
> - 使用 JSX 语法时你需要传入一个函数作为事件处理函数，而不是一个字符串。

- 直接绑定事件执行函数

```jsx
import React from 'react'

export default function Methods() {

  const btn = (e)=>{
    console.log('点你了...');
    //自带event 事件对象
    console.log(e);
    //阻止事件冒泡
    e.stopPropagation()
  }

  return (
    <div>
         <button onClick={btn}>点我呀</button>
    </div>
  )
}
```

- 绑定事件并传递参数

> 如果直接绑定事件，react 会误认为该函数是一个立即执行函数的js代码，这种绑定方式会导致每一次dom的更新都会调用一次该执行函数，如果需要在调用时传递参数就会出现bug.
>
> 解决方案：通过箭头函数返回一个调用执行函数 进行调用即可

```js
import React from 'react'

export default function Methods() {

  const btn = (num)=>{
        console.log(num); //100
  }
  return (
    <div>
         <button onClick={()=>btn(100)}>点我呀</button>
    </div>
  )
}
```

- 绑定事件并传递数据和event对象

> 箭头函数接受event对象 继续作为实参传递给执行函数

```js
import React from 'react'

export default function Methods() {

  const btn = (num,e)=>{
        console.log(num); //100
        console.log(e); //事件对象
  }
  return (
    <div>
         <button onClick={(e)=>btn(100,e)}>点我呀</button>
    </div>
  )
}
```



## 7. useEffect  函数式组件替代-生命周期

> 函数式组件中没有生命周期；只有类组件才会存在生命周期，类组件的创建，更新，销毁等生命周期。
>
> useEffect 函数默认：进入页面就执行一次，以后render函数每执行一次（数据发生改变）就跟着执行一次。

> 常见用法：在react中的异步或副作用操作不太好处理。异步操作：ajax请求，副作用操作：定时器（副作用：需要清除）这个

> useEffect 接受两个参数，useEffect (执行函数,[依赖项])
>
> 执行函数：函数体中 发送 ajax  并通过 useState解构的方法 更新数据
>
> 依赖项：值必须是一个数组，通知react 在哪些数据发生变更时，执行useEffect 的执行函数

```js
useEffect (执行函数);   //进入页面执行一次，每次render执行一次
useEffect (执行函数,[]);   //进入页面执行一次，以后再也不执行，不依赖props 和 state中的数据进行触发
useEffect (执行函数,[num]);  //进入页面执行一次，num发生改变执行一次
```

```js
    useEffect(() => {
        //发送axios请求
        getData({ id:1000 }).then(res => {
            if (res.data.code === 1) {
                //修改数据
                setList(res.data.list)
            }
        })
    }, [])
```

## 8.组件基础

