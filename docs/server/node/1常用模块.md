# node 基础篇【应用创建及模块】

## 初始化一个node 应用

```
vscode 安装插件 node-snippets
```

```js
//初始化一个node 应用
//引入http模块 
var http = require('http');
//request 请求值
//response 响应值
http.createServer(function (request, response) {
  response.writeHead(200, {'Content-Type': 'text/plain'});
  //给页面输出一句话，且结束服务 
  response.end('Hello World');
}).listen(8081);

console.log('Server running at http://127.0.0.1:8081/'); 
```

## 如何获取页面的传值

```js
const http = require('http');
const url = require('url');
http.createServer(function (req, res) {
    //响应状态码 200
    res.writeHead(200, {
        'Content-Type': 'text/html'
    });
    res.write('<head><meta charset="UTF-8"> </head>');
    //获取访问url  localhost:8081?id=111&name=啦啦啦
    console.log(req.url);
    let info = url.parse(req.url, true).query;
    console.log(info.id);
    console.log(info.name);
    res.end('id:' + info.id + 'name:' + info.name);
}).listen(8081);


```

## 实现代码热更新 nodemon

```js
//npm安装
npm install nodemon -g 
//运行程序时使用
nodemon demo01.js
```

## CommonJs API 模块化

- 模块化标准（实现类似于java python 的标准被）
- 服务端javascript应用程序（nodejs）
- 桌面应用程序
- nodejs 是由模块构成，commonJs实现的模块化

###  node 中的模块

- 核心模块  （http  url  fs）
- 自定义模块（exports || module.exports）暴露的单独的js功能模块--相当于公共方法的抽离

```js
//自定义模块 demo02.js
 function getData(a,b){
    return a+b;
 }
exports.getData=getData;
```

```js
//封装request.js 模块
let apiData = {
    get:function(){
        console.log('获取的GET请求数据');
    },
    post:function(){
        console.log('获取的POST请求数据');
    }
}
//两种暴露模式想过相同
//exports.apiData = apiData;
module.exports = apiDatajs
```

```js
//引入自定义模块
const http = require('http');
const url = require('url');
const tools = require('./demo02')
const apiData = require('./request')
http.createServer(function (req, res) {
    //响应状态码 200
    res.writeHead(200, {
        'Content-Type': 'text/html'
    });
    //调用tools
    let data = tools.getData(1, 100);
    console.log(data);
    //调用request
    let data1 = apiData.apiData.get();
    console.log(data1);
    res.end('data=' + data);

}).listen(3000);
```

```js
//同一文件下的多个独立方法的暴露
exports.get = function () {
    console.log('获取的GET请求数据');
}
exports.get = function () {
    console.log('获取的POST请求数据');
}
```

```js
//引入同一文件下的多个独立方法
const request = require('./request')

//调用get()方法
let data1 = request.get();
let data2 = request.post();
```

### node 模块进阶

- 将自定义模块的引入方式与node 核心模块方法的引入方式保持一致

- 自定义模块的js文件放到 node_modules文件夹下，可进行自动识别路径
- 在 node_modules 文件夹下创建 request文件夹
- 在request文件夹下创建 index.js 

```js
// node_modules/request/index.js 
exports.get = function () {
    console.log('获取的GET请求数据');
}
exports.get = function () {
    console.log('获取的POST请求数据');
}
```

```js
//引入及使用方法
const http = require('http');
const request = require('request')
http.createServer(function (req, res) {
    let getData = request.get()
    let postData = request.post()

}).listen(3000);
```

### node 模块高级—— package.json 配置

- 解决模块的共轭能最后实现的文件并不是 index.js

- 如：node_modules/request/request.js 
- 通过package.json中的  “ main” 可以配置指向的文件

- 第一步：在node_modules/reques 文件夹下 通过npm 命令生成 package.json文件 

```npm
npm init --yes
```

- 第二步：写入相关指向配置 package.json

```json
{
  "name": "request",
  "version": "1.0.0",
  "description": "",
  "main": "request.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
```

- 第三步 引入并使用

```js
//引入及使用方法
const http = require('http');
const request = require('request')
http.createServer(function (req, res) {
    let getData = request.get()
    let postData = request.post()

}).listen(3000);
```



















































