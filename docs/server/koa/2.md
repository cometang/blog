---
   title: koa的路由跳转及模板引擎
   author: cometang
   date: 2019-9-26
---

## 实现路由跳转
#### serve.js

```js
const Koa = require("koa");
const json = require('koa-json');
const koaRouter = require('koa-router');
const app = new Koa();
const router = new koaRouter();

app.use(json());

router.get('/index',ctx=>(ctx.body='sssssss'));

app.use(router.routes()).use(router.allowedMethods());
app.listen(3000,()=>{console.log('koa服务端已启动')});
```

![Image text](/koa/koa201.png)

## 实现模板引擎

#### serve.js
```js

const Koa = require("koa");
const json = require('koa-json');
const koaRouter = require('koa-router');
const path = require('path');
const render = require('koa-ejs')

const app = new Koa();
const router = new koaRouter();




app.use(json());
// app.use(async ctx => (ctx.body={msg:'啦啦啦'}));
// router.get('/index',ctx=>(ctx.body='sssssss'));

//DB
const list = [1,2,3,4,5,6,7]


//配置模板引擎
render(app,{
    root:path.join(__dirname,'views'),
    layout:'layout',
    viewExt:'html',
    cache:false,
    debug:false,
})

//路由跳转
router.get('/',async ctx=>{
    await ctx.render('index',{
        data:'我是一个前端开发者',
        list:list
    })
})


app.use(router.routes()).use(router.allowedMethods());

app.listen(3000,()=>{console.log('koa服务端已启动')});

```

#### layout.html

```html
   <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <h1>
        layout.html
    </h1>
    <div class="container">
        <%- body %>
    </div>
</body>
</html>
```

#### index.html

```html
<p>
    index.html
</p>
<h1><%- data %></h1>

<h1></h1>
<ul>
    <% list.forEach(item=>{ %>
        <li>
            <%= item%>
        </li>

    <% }) %>
</ul>
```

## 最终效果图

![Image text](/koa/koa202.png)